; Survey IVR under xivo-extrafeatures (your internal contexts already include this)
[xivo-extrafeatures]
; Dial 8899 to take survey: Collect 1â€“5, then thank-you and hangup
exten => 8899,1,Answer()
 same  => n,NoOp(--- Post-Call Survey ---)
 ; Use a built-in prompt for first test; replace with your uploaded recording later
 same  => n,Playback(demo-echotest)
 same  => n,Read(SCORE,beep,1)                 ; collect one digit
 same  => n,NoOp(Survey score is ${SCORE})

 ; Optional: post result to a webhook if configured in /etc/wazo-calld/conf.d/50-wazo-survey.yml
 ; We can read it at runtime via CALLEEID(name) trick or just hardcode for now.
 ; For simplicity, letâ€™s read env set by calld plugin (see api.py). If not set, skip.
 same  => n,ExecIf($["${WAZO_SURVEY_WEBHOOK}" != ""]?Set(RES=${CURL(${WAZO_SURVEY_WEBHOOK}?score=${SCORE}&uniqueid=${UNIQUEID})}))

 same  => n,Playback(thank-you)
 same  => n,Hangup()
